/*!
**|   Extended Layout Options
**|   Copyright Xaekai 2014 - 2016
**|   Version 2016.10.04.0100
**|https://u.smutty.horse/mkrxjphzepb.js
**|https://files.catbox.moe/r9oavs.js
**@preserve
*/
"use strict";function removeUntilNext(){socket.once("changeMedia",unremoveVideo);return removeVideo()}function removeVideo(event){try{PLAYER.setVolume(0);if(PLAYER.type==="rv"){killVideoUntilItIsDead($(PLAYER.player))}}catch(e){console.log(e)}CLIENT.removedOnGDrive=PLAYER.mediaType=="gd"?true:false;$("#videowrap").hide().attr("id","videowrap_disabled");$("#ytapiplayer").attr("id","ytapiplayer_disabled");$("#chatwrap").removeClass("col-lg-5 col-md-5").addClass("col-md-12");$('a[onclick*="removeVideo"]').attr("onclick","javascript:unremoveVideo(event)").text("Restore video");if(event)event.preventDefault()}function unremoveVideo(event){setTimeout(function(){PLAYER.setVolume(.33)},250);socket.emit("playerReady");$("#chatwrap").addClass("col-lg-5 col-md-5").removeClass("col-md-12");$("#videowrap_disabled").attr("id","videowrap").show();$("#ytapiplayer_disabled").attr("id","ytapiplayer");$('a[onclick*="removeVideo"]').attr("onclick","javascript:removeVideo(event)").text("Remove video");if(event)event.preventDefault();if(CLIENT.removedOnGDrive){CLIENT.removedOnGDrive=false;setTimeout(function(){$("#mediarefresh").click()},1e3)}}function toggleChat(){if($("#chatwrap").parent().attr("id")==="main"){$("#chatwrap").appendTo("#customSettingsStaging");$("#videowrap").css("margin","0 auto");$("#videowrap").css("float","initial");$("#videowrap").css("margin-bottom","20px");$('a[onclick*="toggleChat"]').text("Restore Chat");return}if(!USEROPTS.layout.match(/synchtube/)){$("#chatwrap").prependTo("#main")}else{$("#chatwrap").appendTo("#main")}$("#videowrap").css("margin","");$("#videowrap").css("float","");$("#videowrap").css("margin-bottom","");$('a[onclick*="toggleChat"]').text("Remove Chat")}(function(CyTube_Layout){return CyTube_Layout(window,document,window.jQuery,String)})(function(window,document,$,String,undefined){$('nav.navbar a[href="#"][onclick]').attr("href","javascript:void(0)");if(!$('a[onclick*="removeUntilNext"]').length){$('a[onclick*="removeVideo"]').parent().parent().append($("<li>").append($("<a>").attr("href","javascript:void(0)").attr("onclick","javascript:removeUntilNext()").text("Remove Video Until Next")))}if(!$('a[onclick*="toggleChat"]').length){$('a[onclick*="chatOnly"]').parent().after($("<li>").append($("<a>").attr("href","javascript:void(0)").attr("onclick","javascript:toggleChat()").text("Remove Chat")))}({host:"https://resources.pink.horse/css/",sizing:"20",maxsize:"32",minsize:"15",initialize:function(){if(CLIENT.cinemaMode){return}else{CLIENT.cinemaMode=this}this.loadStyle()},createButtons:function(){const that=this;$('a[onclick*="removeVideo"]').parent().parent().append($("<li>").append($("<a>").attr("href","javascript:void(0)").attr("onclick",'javascript:$("#cinematoggle").click()').text("Cinema Mode")));$('<div id="cinematoggle"><span class="glyphicon glyphicon-new-window"></span></div>').appendTo("body").click(function(){if(!$("body").hasClass("cinemachat")){if($("#userlist").is(":visible")){$("#userlisttoggle").click()}}$("body").toggleClass("cinemachat");if($("iframe[src*=livestream]").length){PLAYER.mediaType="";PLAYER.mediaId="";socket.emit("playerReady")}handleWindowResize()});$('<div id="cinemasizeinc"><span class="glyphicon glyphicon-plus"></span></div>').appendTo("body").click(function(){that.increaseSize()});$('<div id="cinemasizedec"><span class="glyphicon glyphicon-minus"></span></div>').appendTo("body").click(function(){that.decreaseSize()})},renderTemplate:function(){return this.template.replace(/%WIDTH%/g,`${this.sizing}vw`)},createStyle:function(body){this.template=body;this.style=$("<style>").attr("type","text/css").attr("id","cinemaStyle").html(this.renderTemplate()).appendTo("head")},updateStyle:function(){this.style.html(this.renderTemplate())},updateWidth:function(newWidth){this.sizing=newWidth;this.updateStyle()},increaseSize:function(){let current=this.sizing;this.sizing=Math.min(this.maxsize,this.sizing+1);if(current===this.sizing){return this.sendMessage(`Cinema: Already max size`)}localStorage.setItem(`${CHANNEL.name}_cinemaSizing`,this.sizing);this.sendMessage(`Cinema: Sizing increased`);this.updateStyle(this.sizing)},decreaseSize:function(){let current=this.sizing;this.sizing=Math.max(this.minsize,this.sizing-1);if(current===this.sizing){return this.sendMessage(`Cinema: Already min size`)}localStorage.setItem(`${CHANNEL.name}_cinemaSizing`,this.sizing);this.sendMessage(`Cinema: Sizing decreased`);this.updateStyle(this.sizing)},sendMessage:function(message){$("div.chat-msg-\\\\\\$server\\\\\\$:contains(Cinema: )").remove();$("#messagebuffer").trigger("whisper",message)},handleCommand(message,target){var params=message.substring(1).replace(/cinema ?/,"").trim();if(!params.length){$("#cinematoggle").click()}if(params==="nopolls"){$("body").addClass("cinema-nopoll");this.sendMessage(`Cinema: Poll overlay disabled`);localStorage.setItem(`${CHANNEL.name}_cinemaHidePolls`,1)}if(params==="polls"){$("body").removeClass("cinema-nopoll");this.sendMessage(`Cinema: Poll overlay enabled`);localStorage.setItem(`${CHANNEL.name}_cinemaHidePolls`,0)}if(params==="bigger"){this.increaseSize()}if(params==="smaller"){this.decreaseSize()}},registerCommand(){$("#chatline").trigger("registerCommand",["cinema",this.handleCommand.bind(this)])},loadStyle:function(){$.ajax(this.host+"cinema.css?cache="+Math.random()).done(data=>{this.createButtons();this.createStyle(data);this.registerCommand();if(localStorage.getItem(`${CHANNEL.name}_cinemaHidePolls`)!==null){if(parseInt(localStorage.getItem(`${CHANNEL.name}_cinemaHidePolls`))){$("body").addClass("cinema-nopoll")}}if(localStorage.getItem(`${CHANNEL.name}_cinemaSizing`)!==null){this.sizing=parseInt(localStorage.getItem(`${CHANNEL.name}_cinemaSizing`))}})}}).initialize()});